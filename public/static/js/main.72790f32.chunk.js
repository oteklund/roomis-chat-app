(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{136:function(e,t,a){e.exports=a(218)},141:function(e,t,a){},142:function(e,t,a){},196:function(e,t){},200:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),s=(a(141),a(29)),l=a(34),i=(a(142),a(9)),u=a(254),m=a(255),p=a(249),f=a(243),d=a(245),h=a(246),b=a(248),g=a(247),v=a(61),y=a.n(v),E=a(256),x=a(122),O=Object(f.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(3)},title:{flexGrow:1}}}));function j(e){var t=O(),a=r.a.useState(!0),n=Object(i.a)(a,2),o=n[0],c=(n[1],r.a.useState(null)),s=Object(i.a)(c,2),l=s[0],u=s[1],m=Boolean(l);return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{position:"fixed",style:{backgroundColor:"white",boxShadow:"2px 10px 57px -12px rgba(171,171,171,0.39)"}},r.a.createElement(h.a,null,r.a.createElement(g.a,{edge:"start",className:t.menuButton,style:{color:"black"},"aria-label":"back",onClick:function(){e.history.push("/rooms")}},r.a.createElement("i",{className:"fas fa-angle-left"})),r.a.createElement(b.a,{variant:"h6",className:t.title,style:{color:"black"}},e.match.params.name),o&&r.a.createElement("div",null,r.a.createElement(g.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},style:{color:"black"}},r.a.createElement(y.a,null)),r.a.createElement(x.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:m,onClose:function(){u(null)}},r.a.createElement(E.a,{onClick:function(){localStorage.removeItem("token"),e.history.push("/")}},"Log Out"))))))}var k=a(119),w=(a.n(k)()((function(e){return{container:{bottom:0},bubbleContainer:{width:"100%",display:"flex"},bubble:{border:"0.5px solid black",borderRadius:"10px",margin:"5px",padding:"10px",display:"inline-block"}}})),Object(f.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:200},display:"flex","& > *":{margin:e.spacing(1)},large:{width:e.spacing(10),height:e.spacing(10)}}}}))),C=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)([]),l=Object(i.a)(s,2),f=l[0],d=l[1],h=e.socket;Object(n.useEffect)((function(){h.emit("join",e.user,e.room).on("getChatHistory",(function(){})).on("new message",(function(t,a){var n;n=a===e.user?"right":"left",d(f.unshift({message:t,author:a,alignment:n})),document.getElementById("chat-panel").innerHTML+='<li style="list-style: none;" class='.concat(f[0].alignment,">").concat(f[0].author,": ").concat(f[0].message),v()})).off("disconnect")}),[]);var b=function(){""!==o.trim()&&(h.emit("message",o,e.room,e.user),c(""))},g=w(),v=function(){window.scrollTo(0,document.querySelector(".chat").scrollHeight)};return r.a.createElement("div",{className:"chat",style:{overflow:"auto"}},r.a.createElement("ul",{id:"chat-panel",style:{paddingBottom:"190px",paddingTop:"65px"}}),r.a.createElement("footer",null,r.a.createElement(m.a,{alt:"Remy Sharp",className:g.large}),r.a.createElement(u.a,{className:"message",id:"outlined-textarea",label:"Your message",placeholder:"Say Hey!",multiline:!0,rows:"5",variant:"outlined",value:o,onChange:function(e){return c(e.target.value)},onKeyPress:function(e){return function(e){"Enter"===e.key&&(e.preventDefault(),b())}(e)}}),r.a.createElement(p.a,{className:"SendMessageButton",variant:"contained",type:"submit",color:"primary",onClick:b},"Send")))},S=a(120),N=a.n(S),R=function(e){var t=r.a.useState("Controlled"),a=Object(i.a)(t,2),n=(a[0],a[1],N()());return r.a.createElement("div",null,r.a.createElement(j,{match:e.match,history:e.history}),r.a.createElement("footer",null,r.a.createElement(m.a,{alt:"Remy Sharp"}),r.a.createElement(u.a,{className:"message",id:"outlined-textarea",label:"Your message",placeholder:"Say Hey!",multiline:!0,rows:"5",variant:"outlined"}),r.a.createElement(p.a,{className:"SendMessageButton",variant:"contained",type:"submit",color:"primary"},"Send")),r.a.createElement(C,{room:e.match.params.name,user:e.user,socket:n}))},B=a(6),A=a.n(B),D=a(12),I=(a(200),a(33)),T=a.n(I),M=function(){var e=Object(D.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.post("/api/auth/login",t);case 3:return a=e.sent,e.abrupt("return",a.data.token);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(D.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token")){e.next=5;break}return e.abrupt("return",[!1,null]);case 5:return a={headers:{Authorization:"Bearer ".concat(t)}},e.prev=6,e.next=9,T.a.get("/api/auth/authenticate",a);case 9:if(401===(n=e.sent).status&&403===n.status){e.next=14;break}return e.abrupt("return",[!0,n.data.username]);case 14:return e.abrupt("return",[!1,null]);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(6),e.abrupt("return",[!1,null]);case 20:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(){return e.apply(this,arguments)}}(),H={isAuth:function(){return Object(D.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()}},z={margin:"1rem 0.3rem"},G=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),o=a[0],c=a[1];return Object(n.useEffect)((function(){(function(){var e=Object(D.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.isAuth();case 2:(t=e.sent)[0]!==o&&c(t[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),o?r.a.createElement(l.a,{to:"/rooms"}):r.a.createElement("div",{className:"landing"},r.a.createElement("div",{className:"landing-box"},r.a.createElement(b.a,{variant:"h3"},"Roomis"),r.a.createElement(b.a,{variant:"caption",style:{color:"#fff"}},"Chatting made easy"),r.a.createElement("span",{className:"buttons"},r.a.createElement(s.b,{to:"/register",style:{textDecoration:"none"}},r.a.createElement(p.a,{className:"landing-button",variant:"contained",color:"primary",style:z},"Register")),r.a.createElement(s.b,{to:"/login",style:{textDecoration:"none"}},r.a.createElement(p.a,{className:"landing-button",variant:"contained",color:"primary",style:z},"Login")))))},P=a(124),U=a(49),W=a.n(U),J=function(e){var t=e.history,a=Object(n.useState)(""),o=Object(i.a)(a,2),c=o[0],s=o[1],l=Object(n.useState)(""),m=Object(i.a)(l,2),f=m[0],d=m[1],h=function(){var e=Object(D.a)(A.a.mark((function e(a){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,M({username:c,password:f});case 3:(n=e.sent)?(localStorage.setItem("token",n),t.push("/rooms")):(W.a.fire("Invalid credentials!","","error"),s(""),d(""));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"landing"},r.a.createElement(P.a,{elevation:4,style:{padding:"2rem",background:"#f4f4f4"}},r.a.createElement("form",{onSubmit:h},r.a.createElement("div",{className:"input-group"},r.a.createElement(u.a,{label:"Username",autoComplete:"off",value:c,onChange:function(e){return s(e.target.value)},spellCheck:"false"})),r.a.createElement("div",{className:"input-group"},r.a.createElement(u.a,{label:"Password",type:"password",autoComplete:"off",value:f,onChange:function(e){return d(e.target.value)},spellCheck:"false"})),r.a.createElement("div",{className:"input-group",style:{display:"flex",justifyContent:"center"}},r.a.createElement(p.a,{type:"submit",style:{marginTop:"1.5rem"}},"Login"),r.a.createElement(p.a,{type:"button",style:{marginTop:"1.5rem"},onClick:function(){return t.push("/")}},"Cancel")))))},Y=function(){var e=Object(D.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.post("/api/users",t);case 3:if(a=e.sent,console.log(a),200!==a.status&&201!==a.status){e.next=9;break}return e.abrupt("return",a.data);case 9:return e.abrupt("return",!1);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t=e.history,a=Object(n.useState)(""),o=Object(i.a)(a,2),c=o[0],s=o[1],l=Object(n.useState)(""),m=Object(i.a)(l,2),f=m[0],d=m[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),g=b[0],v=b[1],y=Object(n.useState)(""),E=Object(i.a)(y,2),x=E[0],O=E[1],j=function(){var e=Object(D.a)(A.a.mark((function e(a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),f===x){e.next=6;break}return W.a.fire("Password inputs do not match!","","error"),e.abrupt("return");case 6:return e.next=8,Y({username:c,password:f,email:g});case 8:e.sent?(W.a.fire("Register successful, you can log in now!","","success"),s(""),d(""),O(""),v(""),t.push("/login")):W.a.fire("Username or email already taken!","","error");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"landing"},r.a.createElement(P.a,{elevation:4,style:{padding:"2rem",background:"#f4f4f4"}},r.a.createElement("form",{onSubmit:j,autoComplete:"off"},r.a.createElement("div",{className:"input-group"},r.a.createElement(u.a,{type:"text",name:"username",label:"Username",value:c,spellCheck:"false",onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"input-group"},r.a.createElement(u.a,{type:"email",name:"email",label:"Email",spellCheck:"false",value:g,onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",{className:"input-group"},r.a.createElement(u.a,{type:"password",name:"password",label:"Password",spellCheck:"false",value:f,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"input-group"},r.a.createElement(u.a,{type:"password",name:"password2",spellCheck:"false",label:"Confirm password",value:x,onChange:function(e){return O(e.target.value)}})),r.a.createElement("div",{className:"input-group",style:{display:"flex",justifyContent:"center"}},r.a.createElement(p.a,{type:"submit",style:{marginTop:"1.5rem"}},"Register"),r.a.createElement(p.a,{type:"button",style:{marginTop:"1.5rem"},onClick:function(){return t.push("/")}},"Cancel")))))},F=a(23),K=a(17),V=a(43),$=a(44),Q=a(46),X=a(250),Z=a(251),_=a(253),ee=a(252),te=Object(f.a)({root:{maxWidth:345,height:280},media:{height:180},content:{height:100}});function ae(e){var t=te();return r.a.createElement(X.a,{className:t.root},r.a.createElement(s.b,{to:"rooms/".concat(e.room.name),style:{textDecoration:"none",color:"black"}},r.a.createElement(Z.a,null,r.a.createElement(ee.a,{className:t.media,image:"https://source.unsplash.com/featured/?".concat(e.room.name),title:"Contemplative Reptile"}),r.a.createElement(_.a,{className:t.content},r.a.createElement(b.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.room.name),r.a.createElement(b.a,{variant:"body2",color:"textSecondary",component:"p"},e.room.description)))))}var ne=function(e){function t(){return Object(F.a)(this,t),Object(V.a)(this,Object($.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.rooms.map((function(e,t){return r.a.createElement(ae,{key:t,room:e})}));return r.a.createElement("div",{className:"roomListClass"},e)}}]),t}(n.Component),re="/api/rooms/";function oe(){return ce.apply(this,arguments)}function ce(){return(ce=Object(D.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(re);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return le.apply(this,arguments)}function le(){return(le=Object(D.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post(re,t).then((function(e){return e.data}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(f.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:200}}}}));var ie=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(V.a)(this,(e=Object($.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",description:""},a.nameAdded=function(e){a.setState({name:e.target.value})},a.descriptionAdded=function(e){a.setState({description:e.target.value})},a.ready=function(e){e.preventDefault(),a.props.isReady(a.state),a.setState({name:"",description:""})},a}return Object(Q.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{margin:"auto",minHeight:"150px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement(b.a,{variant:"h5"},"Create Chat room"),r.a.createElement("form",{noValidate:!0,className:"create-form",autoComplete:"off",onSubmit:this.ready,style:{display:"flex",alignItems:"center"}},r.a.createElement(u.a,{id:"standard-basic",label:"Room name",value:this.state.name,onChange:this.nameAdded,style:{margin:"0.5rem"}}),r.a.createElement(u.a,{id:"standard-basic",label:"Room description",value:this.state.description,onChange:this.descriptionAdded,style:{margin:"0.5rem",marginRight:"1rem"}}),r.a.createElement(p.a,{variant:"contained",type:"submit",color:"primary"},"Create")))}}]),t}(n.Component),ue=Object(f.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(3)},title:{flexGrow:1}}}));function me(e){var t=ue(),a=r.a.useState(!0),n=Object(i.a)(a,2),o=n[0],c=(n[1],r.a.useState(null)),s=Object(i.a)(c,2),l=s[0],u=s[1],m=Boolean(l);return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{position:"static",style:{backgroundColor:"white",boxShadow:"2px 10px 57px -12px rgba(171,171,171,0.39)",marginBottom:"1rem"}},r.a.createElement(h.a,null,r.a.createElement(b.a,{variant:"h6",className:t.title,style:{color:"black"}},"Logged in: ",e.user),o&&r.a.createElement("div",null,r.a.createElement(g.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},style:{color:"black"}},r.a.createElement(y.a,null)),r.a.createElement(x.a,{id:"menu-appbar",anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:m,onClose:function(){u(null)}},r.a.createElement(E.a,{onClick:function(){localStorage.removeItem("token"),e.history.push("/")}},"Log Out"))))))}var pe=function(e){function t(){var e,a;Object(F.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(V.a)(this,(e=Object($.a)(t)).call.apply(e,[this].concat(r)))).state={rooms:[]},a.componentDidMount=Object(D.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:t=e.sent,a.setState({rooms:t});case 4:case"end":return e.stop()}}),e)}))),a.createRoom=function(){var e=Object(D.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:e.sent,a.setState(a.state),a.componentDidMount();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(Q.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(me,{history:this.props.history,user:this.props.user}),r.a.createElement(ie,{isReady:this.createRoom}),r.a.createElement(ne,{rooms:this.state.rooms}))}}]),t}(n.Component),fe=a(2),de=function(e){var t=e.component,a=Object(fe.a)(e,["component"]),o=Object(n.useState)([null]),c=Object(i.a)(o,2),s=c[0],u=c[1];if(Object(n.useEffect)((function(){function e(){return(e=Object(D.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.isAuth();case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),!0===s[0])return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return r.a.createElement(t,Object.assign({},e,{user:s[1]}))}}));if(!1===s[0]){try{localStorage.removeItem("token")}catch(m){console.error(m)}return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return r.a.createElement(l.a,{to:"/login"})}}))}return null===s[0]?null:void 0};var he=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:G}),r.a.createElement(l.b,{path:"/login",component:J}),r.a.createElement(l.b,{path:"/register",component:q}),r.a.createElement(de,{exact:!0,path:"/rooms",component:pe}),r.a.createElement(de,{path:"/rooms/:name",component:R}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.72790f32.chunk.js.map